<!DOCTYPE html>
<html lang="zh-Hant" class="scroll-smooth">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>åŒ—æ¸¯é«˜ä¸­å­¸ç”Ÿæœƒ | PKSH Student Council</title>
Â  Â  <script src="https://cdn.tailwindcss.com"></script>
Â  Â  <script>
Â  Â  Â  Â  tailwind.config = {
Â  Â  Â  Â  Â  Â  darkMode: 'class',
Â  Â  Â  Â  Â  Â  theme: {
Â  Â  Â  Â  Â  Â  Â  Â  extend: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  colors: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  theme: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DEFAULT: '#00c8b7',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dark: '#00a092',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  light: '#e0fbf9'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gemini: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  start: '#4E8cff',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  end: '#E04f5f'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  animation: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'bounce-slow': 'bounce 3s infinite',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'fade-in': 'fadeIn 0.5s ease-in-out'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  keyframes: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fadeIn: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '0%': { opacity: '0' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '100%': { opacity: '1' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  </script>
Â  Â  <script src="https://unpkg.com/lucide@latest"></script>
Â  Â  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
Â  Â Â 
Â  Â  <style>
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  --primary-color: #00c8b7;
Â  Â  Â  Â  Â  Â  font-family: 'Noto Sans TC', 'Inter', system-ui, sans-serif;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .text-theme { color: var(--primary-color); }
Â  Â  Â  Â  .bg-theme { background-color: var(--primary-color); }
Â  Â  Â  Â  .border-theme { border-color: var(--primary-color); }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* è·‘é¦¬ç‡ˆ */
Â  Â  Â  Â  .marquee-container { overflow: hidden; white-space: nowrap; position: relative; }
Â  Â  Â  Â  .marquee-content { display: inline-block; animation: marquee 30s linear infinite; }
Â  Â  Â  Â  .marquee-content:hover { animation-play-state: paused; }
Â  Â  Â  Â  @keyframes marquee {
Â  Â  Â  Â  Â  Â  0% { transform: translateX(100%); }
Â  Â  Â  Â  Â  Â  100% { transform: translateX(-100%); }
Â  Â  Â  Â  }

Â  Â  Â  Â  /* æœå°‹è¦–çª—éæ¸¡ */
Â  Â  Â  Â  #search-modal { transition: opacity 0.3s ease-in-out; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Gemini æ¼¸å±¤ */
Â  Â  Â  Â  .bg-gradient-gemini {
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, #4E8cff, #E04f5f);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* èŠå¤©è¦–çª—å‹•ç•« */
Â  Â  Â  Â  #gemini-chat-window { transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out; }
Â  Â  Â  Â  .chat-bubble { max-width: 80%; padding: 10px 14px; border-radius: 12px; font-size: 0.95rem; line-height: 1.4; }
Â  Â  Â  Â  .chat-user { background-color: #00c8b7; color: white; align-self: flex-end; border-bottom-right-radius: 2px; }
Â  Â  Â  Â  .chat-ai { background-color: #f3f4f6; color: #1f2937; align-self: flex-start; border-bottom-left-radius: 2px; }
Â  Â  Â  Â  .dark .chat-ai { background-color: #374151; color: #e5e7eb; }

Â  Â  Â  Â  body, div, nav, header { transition: background-color 0.3s, color 0.3s; }
Â  Â  </style>
</head>
<body class="bg-gray-50 text-gray-800 dark:bg-gray-900 dark:text-gray-100 flex flex-col min-h-screen">

Â  Â  <div class="bg-gray-800 text-white dark:bg-black text-sm py-2 px-4 marquee-container">
Â  Â  Â  Â  <div class="marquee-content" id="marquee-text"></div>
Â  Â  </div>

Â  Â  <header class="sticky top-0 z-30 bg-white/95 backdrop-blur shadow-sm dark:bg-gray-800/95 dark:border-b dark:border-gray-700">
Â  Â  Â  Â  <div class="max-w-7xl mx-auto px-2 sm:px-6 lg:px-8">
Â  Â  Â  Â  Â  Â  <div class="flex justify-between items-center h-16">
Â  Â  Â  Â  Â  Â  Â  Â  <a href="#" class="flex-shrink-0 flex items-center gap-2" onclick="navigate('home')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="å¤§é ­è²¼.jpg" alt="PKSH Logo" class="w-10 h-10 rounded-full bg-white dark:bg-gray-700 p-0.5 shadow-sm object-cover">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-xl font-bold text-gray-900 dark:text-white hidden sm:block">åŒ—æ¸¯é«˜ä¸­<span class="text-theme">å­¸ç”Ÿæœƒ</span></span>
Â  Â  Â  Â  Â  Â  Â  Â  </a>

Â  Â  Â  Â  Â  Â  Â  Â  <nav class="hidden xl:flex space-x-1 items-center overflow-x-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="nav-btn px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition whitespace-nowrap" onclick="navigate('home')" data-key="home">é¦–é </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="nav-btn px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition whitespace-nowrap" onclick="navigate('events')" data-key="events">è¿‘æœŸæ´»å‹•</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="nav-btn px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition whitespace-nowrap" onclick="navigate('clubs')" data-key="clubs">ç¤¾åœ˜å°ˆå€</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="nav-btn px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition whitespace-nowrap" onclick="navigate('mailboxes')" data-key="mailboxes">ä¿¡ç®±å°ˆå€</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="nav-btn px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition whitespace-nowrap" onclick="navigate('finance')" data-key="finance">è²¡å‹™æ˜ç´°</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="nav-btn px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition whitespace-nowrap" onclick="navigate('meetings')" data-key="meetings">æœƒè­°ç´€éŒ„</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="nav-btn px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition whitespace-nowrap" onclick="navigate('org')" data-key="org">çµ„ç¹”æ¶æ§‹</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="nav-btn px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition text-theme font-semibold whitespace-nowrap" onclick="navigate('contact')" data-key="contact">è¯çµ¡æˆ‘å€‘</button>
Â  Â  Â  Â  Â  Â  Â  Â  </nav>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center space-x-2 flex-shrink-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="toggleSearch()" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-200 transition">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="search" class="w-5 h-5"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="toggleLang()" class="px-2 py-1 text-xs font-bold border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="lang-display">EN</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="toggleDarkMode()" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-yellow-400 transition">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="moon" id="dark-icon" class="w-5 h-5"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="sun" id="light-icon" class="w-5 h-5 hidden"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="menu-button" class="xl:hidden text-gray-600 dark:text-gray-200 p-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="menu" class="w-6 h-6"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div id="mobile-menu" class="xl:hidden hidden bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700 absolute w-full z-40 shadow-xl overflow-y-auto max-h-[80vh]">
Â  Â  Â  Â  Â  Â  <div class="px-4 pt-2 pb-4 space-y-1">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="block w-full text-left py-3 px-3 rounded-md font-medium hover:bg-gray-50 dark:hover:bg-gray-700" onclick="navigate('home')" data-key="home">é¦–é </button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="block w-full text-left py-3 px-3 rounded-md font-medium hover:bg-gray-50 dark:hover:bg-gray-700" onclick="navigate('events')" data-key="events">è¿‘æœŸæ´»å‹•</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="block w-full text-left py-3 px-3 rounded-md font-medium hover:bg-gray-50 dark:hover:bg-gray-700" onclick="navigate('clubs')" data-key="clubs">ç¤¾åœ˜å°ˆå€</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="block w-full text-left py-3 px-3 rounded-md font-medium hover:bg-gray-50 dark:hover:bg-gray-700" onclick="navigate('mailboxes')" data-key="mailboxes">ä¿¡ç®±å°ˆå€</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="block w-full text-left py-3 px-3 rounded-md font-medium hover:bg-gray-50 dark:hover:bg-gray-700" onclick="navigate('finance')" data-key="finance">è²¡å‹™æ˜ç´°</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="block w-full text-left py-3 px-3 rounded-md font-medium hover:bg-gray-50 dark:hover:bg-gray-700" onclick="navigate('meetings')" data-key="meetings">æœƒè­°ç´€éŒ„</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="block w-full text-left py-3 px-3 rounded-md font-medium hover:bg-gray-50 dark:hover:bg-gray-700" onclick="navigate('org')" data-key="org">çµ„ç¹”æ¶æ§‹</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="block w-full text-left py-3 px-3 rounded-md font-medium hover:bg-gray-50 dark:hover:bg-gray-700 text-theme" onclick="navigate('contact')" data-key="contact">è¯çµ¡æˆ‘å€‘</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </header>

Â  Â  <div id="search-modal" class="fixed inset-0 z-50 bg-black/80 backdrop-blur-sm hidden flex flex-col pt-20 px-4 items-center">
Â  Â  Â  Â  <div class="w-full max-w-2xl relative">
Â  Â  Â  Â  Â  Â  <input type="text" id="search-input" class="w-full bg-white dark:bg-gray-800 text-xl p-4 rounded-xl shadow-2xl dark:text-white border-2 border-theme focus:outline-none" placeholder="è¼¸å…¥é—œéµå­—æœå°‹..." onkeyup="performSearch()">
Â  Â  Â  Â  Â  Â  <button onclick="toggleSearch()" class="absolute right-4 top-4 text-gray-500 hover:text-red-500">
Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="x" class="w-6 h-6"></i>
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div id="search-results" class="w-full max-w-2xl mt-4 space-y-2 overflow-y-auto max-h-[70vh] pb-10"></div>
Â  Â  </div>

Â  Â  <div class="fixed bottom-6 right-6 z-50 flex flex-col items-end gap-4">
Â  Â  Â  Â  <div id="gemini-chat-window" class="w-80 sm:w-96 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 hidden transform origin-bottom-right scale-90 opacity-0 flex flex-col max-h-[500px]">
Â  Â  Â  Â  Â  Â  <div class="bg-gradient-gemini p-4 rounded-t-2xl flex justify-between items-center text-white">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2"><i data-lucide="sparkles" class="w-5 h-5"></i><span class="font-bold">Gemini æ™ºæ…§åŠ©æ‰‹</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="toggleGemini()" class="hover:text-gray-200"><i data-lucide="x" class="w-5 h-5"></i></button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div id="gemini-messages" class="flex-grow p-4 overflow-y-auto space-y-3 bg-gray-50 dark:bg-gray-900 h-80">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="chat-bubble chat-ai">å—¨ï¼æˆ‘æ˜¯åŒ—æ¸¯é«˜ä¸­çš„ AI åŠ©æ‰‹ã€‚è«‹å•ä»Šå¤©æœ‰ä»€éº¼æˆ‘å¯ä»¥å¹«æ‚¨çš„å—ï¼Ÿâœ¨</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="p-3 border-t dark:border-gray-700 bg-white dark:bg-gray-800 rounded-b-2xl flex gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="gemini-input" placeholder="è¼¸å…¥è¨Šæ¯..." class="flex-grow p-2 rounded-lg border dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-400" onkeypress="handleGeminiEnter(event)">
Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="sendGeminiMessage()" class="bg-gradient-gemini p-2 rounded-lg text-white hover:opacity-90 transition transform active:scale-95"><i data-lucide="send" class="w-5 h-5"></i></button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <button onclick="toggleGemini()" class="bg-white dark:bg-gray-800 p-3 rounded-full shadow-xl border border-gray-100 dark:border-gray-600 group hover:scale-110 transition duration-300">
Â  Â  Â  Â  Â  Â  <div class="bg-gradient-gemini p-3 rounded-full text-white shadow-lg animate-bounce-slow"><i data-lucide="bot" class="w-8 h-8"></i></div>
Â  Â  Â  Â  </button>
Â  Â  </div>

Â  Â  <main class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 flex-grow w-full" id="app-container">
Â  Â  Â  Â  <div id="loading-spinner" class="flex justify-center items-center h-64">
Â  Â  Â  Â  Â  Â  <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-theme"></div>
Â  Â  Â  Â  </div>
Â  Â  </main>

Â  Â  <footer class="bg-gray-100 dark:bg-gray-800 mt-auto py-8 border-t dark:border-gray-700">
Â  Â  Â  Â  <div class="max-w-7xl mx-auto px-4 text-center text-sm text-gray-500 dark:text-gray-400">
Â  Â  Â  Â  Â  Â  <p class="font-bold text-lg mb-4 text-theme">PKSH Student Council</p>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="flex justify-center items-center gap-6 mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  <a href="https://www.instagram.com/pksh.su/" target="_blank" class="hover:text-pink-600 transition flex flex-col items-center gap-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="instagram" class="w-6 h-6"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-xs">å­¸ç”Ÿæœƒ IG</span>
Â  Â  Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  Â  Â  Â  Â  <a href="https://www.facebook.com/52PKSH/?locale=zh_TW" target="_blank" class="hover:text-blue-600 transition flex flex-col items-center gap-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="facebook" class="w-6 h-6"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-xs">å­¸æ ¡ FB</span>
Â  Â  Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  Â  Â  Â  Â  <a href="https://www.pksh.ylc.edu.tw/home" target="_blank" class="hover:text-theme transition flex flex-col items-center gap-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="globe" class="w-6 h-6"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-xs">å­¸æ ¡å®˜ç¶²</span>
Â  Â  Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <p>Â© 2025 åœ‹ç«‹åŒ—æ¸¯é«˜ä¸­å­¸ç”Ÿæœƒ. All Rights Reserved.</p>
Â  Â  Â  Â  </div>
Â  Â  </footer>

Â  Â  <script type="module">
Â  Â  Â  Â  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
Â  Â  Â  Â  import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

Â  Â  Â  Â  const I18N = {
Â  Â  Â  Â  Â  Â  zh: {
Â  Â  Â  Â  Â  Â  Â  Â  home: 'é¦–é ', events: 'è¿‘æœŸæ´»å‹•', mailboxes: 'ä¿¡ç®±å°ˆå€', clubs: 'ç¤¾åœ˜å°ˆå€',Â 
Â  Â  Â  Â  Â  Â  Â  Â  contact: 'è¯çµ¡æˆ‘å€‘', org: 'çµ„ç¹”æ¶æ§‹', finance: 'è²¡å‹™æ˜ç´°', meetings: 'æœƒè­°ç´€éŒ„', admin: 'å¹¹éƒ¨ç™»å…¥',
Â  Â  Â  Â  Â  Â  Â  Â  marquee: 'æ­¡è¿ä¾†åˆ°åŒ—æ¸¯é«˜ä¸­å­¸ç”Ÿæœƒï¼ 12/24(ä¸‰) é‡‘å‹¾ç›ƒæ´»å‹• â€¢ 1/16-20 ç¬¬ä¸‰æ¬¡æ®µè€ƒ â€¢ å‚³æƒ…æ´»å‹•ç†±çƒˆé€²è¡Œä¸­ï¼',
Â  Â  Â  Â  Â  Â  Â  Â  heroTitle: 'åŒ—æ¸¯é«˜ä¸­å­¸ç”Ÿæœƒäº’å‹•ç¶²ç«™',
Â  Â  Â  Â  Â  Â  Â  Â  heroSubtitle: 'ä½ çš„è²éŸ³ï¼Œæˆ‘å€‘çš„è¡Œå‹•ã€‚å…±å‰µæ›´ç¾å¥½çš„æ ¡åœ’ç”Ÿæ´»ã€‚',
Â  Â  Â  Â  Â  Â  Â  Â  btnComplaint: 'å‰å¾€ä¿¡ç®±å°ˆå€',
Â  Â  Â  Â  Â  Â  Â  Â  news: 'æœ€æ–°å…¬å‘Š',
Â  Â  Â  Â  Â  Â  Â  Â  confession: 'åŒ¿åå‘Šç™½ç‰†',
Â  Â  Â  Â  Â  Â  Â  Â  financeTitle: 'è²¡å‹™æ˜ç´°',
Â  Â  Â  Â  Â  Â  Â  Â  orgTitle: 'å­¸ç”Ÿæœƒçµ„ç¹”æ¶æ§‹',
Â  Â  Â  Â  Â  Â  Â  Â  eventTitle: 'è¿‘æœŸæ´»å‹•ä¸€è¦½',
Â  Â  Â  Â  Â  Â  Â  Â  meetingTitle: 'æœƒè­°è¨˜éŒ„å­˜æª”',
Â  Â  Â  Â  Â  Â  Â  Â  clubTitle: 'ç¤¾åœ˜å°ˆå€',
Â  Â  Â  Â  Â  Â  Â  Â  rightsMailbox: 'å­¸æ¬Šä¿¡ç®±', rightsDesc: 'ç™¼ç¾æ ¡åœ’è¨­å‚™æå£ã€å°å­¸æ ¡æ”¿ç­–æœ‰ç–‘å•æˆ–å»ºè­°ï¼Ÿè«‹å¡«å¯«æ­¤è¡¨å–®ï¼Œå­¸æ¬Šçµ„å°‡ç‚ºæ‚¨çˆ­å–æ¬Šç›Šã€‚',
Â  Â  Â  Â  Â  Â  Â  Â  anonMailbox: 'åŒ¿åä¿¡ç®±', anonDesc: 'å¿ƒæƒ…æŠ’ç™¼ã€æƒ³å°å­¸ç”Ÿæœƒèªªæ‚„æ‚„è©±ï¼Ÿé€™è£¡æ˜¯çµ•å°ä¿å¯†çš„æ¨¹æ´ã€‚',
Â  Â  Â  Â  Â  Â  Â  Â  goToForm: 'å‰å¾€å¡«å¯«è¡¨å–®', searchPlaceholder: 'è¼¸å…¥é—œéµå­—æœå°‹å…¬å‘Šæˆ–æ´»å‹•...', noResults: 'æ²’æœ‰æ‰¾åˆ°ç›¸é—œçµæœ',
Â  Â  Â  Â  Â  Â  Â  Â  col_date: 'æ—¥æœŸ', col_item: 'é …ç›®', col_amount: 'é‡‘é¡',
Â  Â  Â  Â  Â  Â  Â  Â  role_pres: 'æœƒé•·', role_vp: 'å‰¯æœƒé•·', role_admin: 'è¡Œæ”¿çµ„', role_act: 'æ´»å‹•çµ„', role_mobile: 'æ©Ÿå‹•çµ„',
Â  Â  Â  Â  Â  Â  Â  Â  role_pr: 'å…¬é—œçµ„', role_ga: 'ç¸½å‹™çµ„', role_art: 'ç¾å®£çµ„', role_chief: 'çµ„é•·', role_deputy: 'å‰¯çµ„é•·'
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  en: {
Â  Â  Â  Â  Â  Â  Â  Â  home: 'Home', events: 'Events', mailboxes: 'Mailboxes', clubs: 'Clubs',
Â  Â  Â  Â  Â  Â  Â  Â  contact: 'Contact Us', org: 'Organization', finance: 'Finance', meetings: 'Meeting Minutes', admin: 'Staff Login',
Â  Â  Â  Â  Â  Â  Â  Â  marquee: 'Welcome to PKSH Student Council! 12/24 Xmas Event â€¢ 1/16-20 3rd Midterm Exam â€¢ Message Delivery Event Ongoing!',
Â  Â  Â  Â  Â  Â  Â  Â  heroTitle: 'PKSH Student Council Interactive Site',
Â  Â  Â  Â  Â  Â  Â  Â  heroSubtitle: 'Your Voice, Our Action. Creating a better campus life together.',
Â  Â  Â  Â  Â  Â  Â  Â  btnComplaint: 'Go to Mailboxes',
Â  Â  Â  Â  Â  Â  Â  Â  news: 'Latest News',
Â  Â  Â  Â  Â  Â  Â  Â  confession: 'Confession Wall',
Â  Â  Â  Â  Â  Â  Â  Â  financeTitle: 'Financial Details',
Â  Â  Â  Â  Â  Â  Â  Â  orgTitle: 'Organizational Chart',
Â  Â  Â  Â  Â  Â  Â  Â  eventTitle: 'Upcoming Events',
Â  Â  Â  Â  Â  Â  Â  Â  meetingTitle: 'Meeting Minutes Archive',
Â  Â  Â  Â  Â  Â  Â  Â  clubTitle: 'Student Clubs',
Â  Â  Â  Â  Â  Â  Â  Â  rightsMailbox: 'Student Rights Mailbox', rightsDesc: 'Report damaged facilities or suggest policy changes. The Student Rights Dept will fight for you.',
Â  Â  Â  Â  Â  Â  Â  Â  anonMailbox: 'Anonymous Mailbox', anonDesc: 'Share your feelings or whisper to the Student Council. This is a confidential space.',
Â  Â  Â  Â  Â  Â  Â  Â  goToForm: 'Fill out Form', searchPlaceholder: 'Search news or events...', noResults: 'No results found',
Â  Â  Â  Â  Â  Â  Â  Â  col_date: 'Date', col_item: 'Item', col_amount: 'Amount',
Â  Â  Â  Â  Â  Â  Â  Â  role_pres: 'President', role_vp: 'Vice President', role_admin: 'Administrative Dept', role_act: 'Activity Dept', role_mobile: 'Logistics Dept',
Â  Â  Â  Â  Â  Â  Â  Â  role_pr: 'Public Relations', role_ga: 'General Affairs', role_art: 'Art & Design', role_chief: 'Chief', role_deputy: 'Deputy'
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  const APP_STATE = {
Â  Â  Â  Â  Â  Â  view: 'home',
Â  Â  Â  Â  Â  Â  lang: 'zh',
Â  Â  Â  Â  Â  Â  darkMode: false,
Â  Â  Â  Â  Â  Â  userId: null,
Â  Â  Â  Â  Â  Â  // è¼ªæ’­è¨ˆæ™‚å™¨
Â  Â  Â  Â  Â  Â  confessionTimer: null,
Â  Â  Â  Â  Â  Â  confessionIndex: 0,
Â  Â  Â  Â  Â  Â  mockData: {
Â  Â  Â  Â  Â  Â  Â  Â  // é¦–é å…¬å‘Š
Â  Â  Â  Â  Â  Â  Â  Â  announcements: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id: 1,Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  title_zh: '114å­¸å¹´åº¦é‡‘å‹¾ç›ƒæ­Œå”±æ¯”è³½æ™‚ç¨‹è¡¨',Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  title_en: '114th Golden Hook Cup Singing Contest Schedule',Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tag_zh: 'æ´»å‹•',Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tag_en: 'Event',Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  date: '2025-12-24',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  content_zh: `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <table class="w-full text-sm text-left border-collapse mt-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <thead class="bg-gray-100 dark:bg-gray-700"><tr><th class="p-2">æ™‚é–“</th><th class="p-2">å…§å®¹</th><th class="p-2">å‚™è¨»</th></tr></thead>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tbody>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr class="border-b dark:border-gray-700"><td class="p-2">13:00-13:10</td><td>å­¸ç”Ÿé›†åˆ</td><td>æ•™å®˜å®¤</td></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr class="border-b dark:border-gray-700"><td class="p-2">13:10-13:20</td><td>ç¥ç§˜å˜‰è³“Aé–‹å ´</td><td></td></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr class="border-b dark:border-gray-700"><td class="p-2">13:20-13:30</td><td>è©±åŠ‡ç¤¾+ç¥ç§˜å˜‰è³“B</td><td>åŒæ­¥ç¾©è³£æ´»å‹•</td></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr class="border-b dark:border-gray-700"><td class="p-2">13:30-13:40</td><td>ç†±éŸ³ç¤¾è¡¨æ¼”</td><td></td></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr class="border-b dark:border-gray-700"><td class="p-2">13:40-14:05</td><td>åƒè³½è€…1-5è™Ÿ</td><td></td></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr class="border-b dark:border-gray-700"><td class="p-2">14:05-14:15</td><td>ç†±èˆç¤¾è¡¨æ¼”</td><td></td></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr class="border-b dark:border-gray-700"><td class="p-2">14:15-14:40</td><td>åƒè³½è€…6-10è™Ÿ</td><td></td></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr class="border-b dark:border-gray-700"><td class="p-2">14:40-14:45</td><td>ç‰¹åˆ¥å˜‰è³“C</td><td></td></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr class="border-b dark:border-gray-700"><td class="p-2">14:45-15:10</td><td>åƒè³½è€…11-15è™Ÿ</td><td></td></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr class="border-b dark:border-gray-700"><td class="p-2">15:10-15:15</td><td>ç†±èˆç¤¾è¡¨æ¼”</td><td></td></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr class="border-b dark:border-gray-700"><td class="p-2">15:15-15:30</td><td>å¡ç‰‡åŒ¿åå‘Šç™½</td><td></td></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr class="border-b dark:border-gray-700"><td class="p-2">15:30-15:40</td><td>ç«¥è»ç¤¾è¡¨æ¼”</td><td>ç¾©è³£å ´åœ°å¾©åŸ</td></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr class="border-b dark:border-gray-700"><td class="p-2">15:40-15:45</td><td>ç‰¹åˆ¥å˜‰è³“D</td><td></td></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr class="border-b dark:border-gray-700"><td class="p-2">15:50~</td><td>å…¬å‘Šåæ¬¡</td><td>å ´åœ°å¾©åŸ</td></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tbody>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </table>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  Â  Â  // å‘Šç™½ç‰†æ¨¡æ“¬è³‡æ–™
Â  Â  Â  Â  Â  Â  Â  Â  confessionWall: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { content: "å‚³æƒ…çš„å·§å…‹åŠ›çœŸçš„å¾ˆå¥½åƒï¼Œè¬è¬å­¸å§Šï¼", author: "é«˜ä¸€çš„å°æ˜" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { content: "é‡‘å‹¾ç›ƒå¤§å®¶åŠ æ²¹ï¼æœŸå¾…ç¥ç§˜å˜‰è³“ï¼", author: "è·¯éçš„åŒå­¸" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { content: "å¤©æ°£è®Šå†·äº†ï¼Œå¤§å®¶è¦æ³¨æ„ä¿æš–å–”ï½", author: "æš–æš–åŒ…" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { content: "å­¸ç”Ÿæœƒè¾›è‹¦äº†ï¼Œæ´»å‹•è¾¦å¾—å¾ˆæ£’ï¼", author: "é«˜ä¸‰è€å±è‚¡" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { content: "å¸Œæœ›èƒ½å¤šè¾¦ä¸€é»æ ¡éš›äº¤æµæ´»å‹•ï¼", author: "æƒ³äº¤æœ‹å‹çš„äºº" }
Â  Â  Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  Â  Â  events: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { date: '12/24', title_zh: 'é‡‘å‹¾ç›ƒæ­Œå”±å¤§è³½', title_en: 'Jingle Bell Singing Contest', location_zh: 'æ´»å‹•ä¸­å¿ƒ', location_en: 'Activity Center', time: '13:00', type: 'Entertainment' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { date: '01/16', title_zh: 'ç¬¬ä¸‰æ¬¡æ®µè€ƒ Day1', title_en: '3rd Midterm Exam Day 1', location_zh: 'å„ç­æ•™å®¤', location_en: 'Classrooms', time: '08:00', type: 'Academic' },
Â  Â  Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  Â  Â  finance: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { item_zh: 'è–èª•æ´»å‹•ä½ˆç½®è²»', item_en: 'Xmas Decoration', amount: -5000, date: '2025-12-15', type: 'Out' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { item_zh: 'å‚³æƒ…å¡ç‰‡ç¾©è³£æ”¶å…¥', item_en: 'Card Sale Income', amount: 8500, date: '2025-12-18', type: 'In' },
Â  Â  Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  Â  Â  // æ–°å¢ Emoji æ¬„ä½
Â  Â  Â  Â  Â  Â  Â  Â  orgLeaders: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { roleKey: 'role_pres', icon: 'ğŸ‘‘', name_zh: 'å¼µä½¾å‚‘', name_en: 'Zhang Yi-Jie', desc_zh: 'å°å…§ç¶œç†å…§å‹™ï¼Œä¸»æŒå¬é–‹æœƒå“¡ä»£è¡¨å¤§æœƒï¼Œå°å¤–ä»£è¡¨æœ¬æœƒï¼Œé…åˆå­¸æ ¡æ¨å±•å„é …æ´»å‹•ä¸¦è² è²¬ç¶œç†æœ¬æœƒäº‹å®œã€‚', desc_en: 'Manages internal affairs, presides over general assembly meetings, represents the council externally, and oversees council matters in cooperation with school activities.' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { roleKey: 'role_vp', icon: 'â­', name_zh: 'ç‹é›…ç', name_en: 'Wang Ya-Min', desc_zh: 'å”åŠ©æœƒé•·åŸ·è¡Œæœ¬æœƒäº‹å®œï¼Œæœƒé•·å› æ•…ç¼ºå¸­æ™‚ä»£ç†ä¹‹ã€‚', desc_en: 'Assists the President in executing council matters and acts on behalf of the President in their absence.' }
Â  Â  Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  Â  Â  orgDepts: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { roleKey: 'role_act', icon: 'ğŸ‰', chief: 'é„­é›¨æ¶µ', chief_en: 'Zheng Yu-Han', deputy: '', deputy_en: '', desc_zh: 'è² è²¬ç­–åŠƒåŠæ¨è¡Œæœ¬æœƒæ‰€èˆ‰è¾¦ä¹‹å„é¡æ´»å‹•ã€‚', desc_en: 'Responsible for planning and implementing various activities organized by the council.' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { roleKey: 'role_art', icon: 'ğŸ¨', chief: 'æœ±å®ˆæ™´', chief_en: 'Zhu Shou-Qing', deputy: 'é»ƒç“Šç¾', deputy_en: 'Huang Qiong-Mei', desc_zh: 'è² è²¬æœ¬æœƒå­¸è—æ´»å‹•ã€æµ·å ±ã€å£å ±è¨­è¨ˆã€‚', desc_en: 'Responsible for art activities, poster design, and wall newspaper design.' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { roleKey: 'role_admin', icon: 'ğŸ“', chief: 'è”¡ç§‰å®', chief_en: 'Tsai Bing-Hong', deputy: 'é¡å­ä’Ÿ', deputy_en: 'Yan Zi-Dan', desc_zh: 'è¨­çµ„é•·ä¸€äººï¼Œçµ„å“¡è‹¥å¹²äººã€‚è² è²¬æœ¬æœƒé–‹æœƒé€šå‘Šã€æœƒè­°è¨˜éŒ„åŠè³‡æ–™ä¹‹æ”¶é›†æ•´ç†ã€‚', desc_en: 'Responsible for meeting notices, recording minutes, and collecting/organizing data. Consists of one chief and several members.' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { roleKey: 'role_ga', icon: 'ğŸ’°', chief: 'è¶™èŠç¿Š', chief_en: 'Zhao Zhi-Yi', deputy: '', deputy_en: '', desc_zh: 'è² è²¬æœ¬æœƒç¶“è²»æ”¶æ”¯ï¼Œè²¡ç”¢ä¿ç®¡ã€‚', desc_en: 'Responsible for the councilâ€™s financial income/expenditure and property custody.' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { roleKey: 'role_pr', icon: 'ğŸ“¢', chief: 'è¨±é›…ç³', chief_en: 'Xu Ya-Lin', deputy: '', deputy_en: '', desc_zh: 'è² è²¬æœ¬æœƒæœƒè­°ä¹‹è¯çµ¡åŠèˆ‰è¾¦æ´»å‹•ä¹‹è¯ç¹«ï¼Œå°å¤–è² è²¬å…¬å…±é—œä¿‚ä¹‹è·å‹™ã€‚', desc_en: 'Responsible for liaison of meetings and activities, and external public relations duties.' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { roleKey: 'role_mobile', icon: 'ğŸ› ï¸', chief: 'åŠ‰ä¹™è‘­', chief_en: 'Liu Yi-Jia', deputy: '', deputy_en: '', desc_zh: 'è² è²¬æœ¬æœƒèˆ‰è¾¦ä¹‹å ´åœ°ä½ˆç½®ï¼ŒåŠå…¶ä»–æœå‹™äº‹é …ã€‚', desc_en: 'Responsible for venue decoration for council events and other service matters.' }
Â  Â  Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  Â  Â  clubs: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name_zh: 'ç†±èˆç¤¾', name_en: 'Pop Dance Club', category: 'Dance', img: 'dance.jpg', ig: 'https://www.instagram.com/pkdc.20_flaming/' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name_zh: 'ç†±éŸ³ç¤¾', name_en: 'Pop Music Club', category: 'Music', img: 'music.jpg', ig: 'https://www.instagram.com/pkhmc_/' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name_zh: 'ç«¥è»ç¤¾', name_en: 'Scout Club', category: 'Service', img: 'scout.jpg', ig: 'https://www.instagram.com/pksh_circus_scout/' },
Â  Â  Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  Â  Â  meetings: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { date: '2025-11-05', title_zh: 'æœŸä¸­ç¤¾åœ˜é•·å¤§æœƒæœƒè­°è¨˜éŒ„', title_en: 'Mid-term Club Leaders Meeting Minutes' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { date: '2025-10-20', title_zh: 'æ ¡æ…¶ç±Œå‚™ç¬¬äºŒæ¬¡æœƒè­°', title_en: '2nd Anniversary Prep Meeting' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { date: '2025-09-15', title_zh: 'ç¬¬å…­å±†ç¬¬ä¸€æ¬¡ä¾‹æœƒè¨˜éŒ„', title_en: '6th Session 1st Regular Meeting' }
Â  Â  Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  const firebaseConfig = { apiKey: "mock", authDomain: "mock" };
Â  Â  Â  Â  const app = initializeApp(firebaseConfig);
Â  Â  Â  Â  const auth = getAuth(app);
Â  Â  Â  Â Â 
Â  Â  Â  Â  signInAnonymously(auth).catch(e => console.log("Auth placeholder"));
Â  Â  Â  Â  onAuthStateChanged(auth, (user) => {
Â  Â  Â  Â  Â  Â  APP_STATE.userId = user ? user.uid : null;
Â  Â  Â  Â  Â  Â  document.getElementById('loading-spinner')?.remove();
Â  Â  Â  Â  Â  Â  render();
Â  Â  Â  Â  });

Â  Â  Â  Â  const t = (key) => I18N[APP_STATE.lang][key] || key;
Â  Â  Â  Â  const isEn = () => APP_STATE.lang === 'en';

Â  Â  Â  Â  function updateMarquee() {
Â  Â  Â  Â  Â  Â  const el = document.getElementById('marquee-text');
Â  Â  Â  Â  Â  Â  if(el) el.innerText = t('marquee');
Â  Â  Â  Â  }

Â  Â  Â  Â  window.toggleSearch = () => {
Â  Â  Â  Â  Â  Â  const modal = document.getElementById('search-modal');
Â  Â  Â  Â  Â  Â  const input = document.getElementById('search-input');
Â  Â  Â  Â  Â  Â  if (modal.classList.contains('hidden')) {
Â  Â  Â  Â  Â  Â  Â  Â  modal.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  input.focus();
Â  Â  Â  Â  Â  Â  Â  Â  input.placeholder = t('searchPlaceholder');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  modal.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('search-results').innerHTML = '';
Â  Â  Â  Â  Â  Â  Â  Â  input.value = '';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  window.performSearch = () => {
Â  Â  Â  Â  Â  Â  const query = document.getElementById('search-input').value.toLowerCase();
Â  Â  Â  Â  Â  Â  const resultsDiv = document.getElementById('search-results');
Â  Â  Â  Â  Â  Â  if (query.length < 2) {
Â  Â  Â  Â  Â  Â  Â  Â  resultsDiv.innerHTML = '';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  const hits = [];
Â  Â  Â  Â  Â  Â  APP_STATE.mockData.announcements.forEach(a => {
Â  Â  Â  Â  Â  Â  Â  Â  const title = isEn() ? a.title_en : a.title_zh;
Â  Â  Â  Â  Â  Â  Â  Â  if (title.toLowerCase().includes(query)) hits.push({ type: isEn()?'News':'å…¬å‘Š', title: title, date: a.date, icon: 'bell' });
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  APP_STATE.mockData.events.forEach(e => {
Â  Â  Â  Â  Â  Â  Â  Â  const title = isEn() ? e.title_en : e.title_zh;
Â  Â  Â  Â  Â  Â  Â  Â  if (title.toLowerCase().includes(query)) hits.push({ type: isEn()?'Event':'æ´»å‹•', title: title, date: e.date, icon: 'calendar' });
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  if (hits.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  resultsDiv.innerHTML = `<div class="text-center text-white text-lg mt-10">${t('noResults')}</div>`;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  resultsDiv.innerHTML = hits.map(h => `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-white dark:bg-gray-800 p-4 rounded-lg flex items-center gap-4 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-theme/20 p-2 rounded-full text-theme"><i data-lucide="${h.icon}"></i></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold dark:text-white">${h.title}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-xs bg-gray-200 dark:bg-gray-600 px-2 py-0.5 rounded text-gray-600 dark:text-gray-300">${h.type}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-xs text-gray-400 ml-2">${h.date}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `).join('');
Â  Â  Â  Â  Â  Â  Â  Â  lucide.createIcons();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  window.toggleGemini = () => {
Â  Â  Â  Â  Â  Â  const window = document.getElementById('gemini-chat-window');
Â  Â  Â  Â  Â  Â  if (window.classList.contains('hidden')) {
Â  Â  Â  Â  Â  Â  Â  Â  window.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.classList.remove('scale-90', 'opacity-0');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.classList.add('scale-100', 'opacity-100');
Â  Â  Â  Â  Â  Â  Â  Â  }, 10);
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  window.classList.remove('scale-100', 'opacity-100');
Â  Â  Â  Â  Â  Â  Â  Â  window.classList.add('scale-90', 'opacity-0');
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => window.classList.add('hidden'), 300);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  window.handleGeminiEnter = (e) => {
Â  Â  Â  Â  Â  Â  if (e.key === 'Enter') sendGeminiMessage();
Â  Â  Â  Â  };

Â  Â  Â  Â  window.sendGeminiMessage = () => {
Â  Â  Â  Â  Â  Â  const input = document.getElementById('gemini-input');
Â  Â  Â  Â  Â  Â  const msg = input.value.trim();
Â  Â  Â  Â  Â  Â  if(!msg) return;
Â  Â  Â  Â  Â  Â  const container = document.getElementById('gemini-messages');
Â  Â  Â  Â  Â  Â  container.innerHTML += `<div class="chat-bubble chat-user w-fit ml-auto mb-2">${msg}</div>`;
Â  Â  Â  Â  Â  Â  input.value = '';
Â  Â  Â  Â  Â  Â  container.scrollTop = container.scrollHeight;
Â  Â  Â  Â  Â  Â  const loadingId = 'loading-' + Date.now();
Â  Â  Â  Â  Â  Â  container.innerHTML += `<div id="${loadingId}" class="chat-bubble chat-ai w-fit mr-auto mb-2 italic text-gray-400">æ€è€ƒä¸­...</div>`;
Â  Â  Â  Â  Â  Â  container.scrollTop = container.scrollHeight;
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById(loadingId).remove();
Â  Â  Â  Â  Â  Â  Â  Â  let reply = "";
Â  Â  Â  Â  Â  Â  Â  Â  if(msg.includes('æ´»å‹•') || msg.includes('event')) reply = "è¿‘æœŸæœ‰ **é‡‘å‹¾ç›ƒæ­Œå”±å¤§è³½ (12/24)** å’Œ **ç¬¬ä¸‰æ¬¡æ®µè€ƒ (1/16)** å–”ï¼";
Â  Â  Â  Â  Â  Â  Â  Â  else if(msg.includes('ç¤¾åœ˜') || msg.includes('club')) reply = "æˆ‘å€‘æœ‰ç†±éŸ³ç¤¾ã€ç†±èˆç¤¾å’Œç«¥è»ç¤¾ç­‰ç­‰ï¼";
Â  Â  Â  Â  Â  Â  Â  Â  else reply = "æˆ‘æ˜¯åŒ—æ¸¯é«˜ä¸­å­¸ç”Ÿæœƒçš„ AI åŠ©æ‰‹ã€‚ç›®å‰åƒ…æä¾›åŸºæœ¬è³‡è¨ŠæŸ¥è©¢ã€‚ğŸ˜Š";
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML += `<div class="chat-bubble chat-ai w-fit mr-auto mb-2">${marked.parse(reply)}</div>`;
Â  Â  Â  Â  Â  Â  Â  Â  container.scrollTop = container.scrollHeight;
Â  Â  Â  Â  Â  Â  }, 1000);
Â  Â  Â  Â  };

Â  Â  Â  Â  function startConfessionCarousel() {
Â  Â  Â  Â  Â  Â  if (APP_STATE.confessionTimer) clearInterval(APP_STATE.confessionTimer);
Â  Â  Â  Â  Â  Â  const updateConfession = () => {
Â  Â  Â  Â  Â  Â  Â  Â  const elContent = document.getElementById('confession-content');
Â  Â  Â  Â  Â  Â  Â  Â  const elAuthor = document.getElementById('confession-author');
Â  Â  Â  Â  Â  Â  Â  Â  if(!elContent || !elAuthor) return;

Â  Â  Â  Â  Â  Â  Â  Â  const data = APP_STATE.mockData.confessionWall[APP_STATE.confessionIndex];
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  elContent.classList.remove('animate-fade-in');
Â  Â  Â  Â  Â  Â  Â  Â  elContent.style.opacity = 0;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  elContent.innerText = `"${data.content}"`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  elAuthor.innerText = `- ${data.author}`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  elContent.style.opacity = 1;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  elContent.classList.add('animate-fade-in');
Â  Â  Â  Â  Â  Â  Â  Â  }, 300);

Â  Â  Â  Â  Â  Â  Â  Â  APP_STATE.confessionIndex = (APP_STATE.confessionIndex + 1) % APP_STATE.mockData.confessionWall.length;
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  updateConfession();
Â  Â  Â  Â  Â  Â  APP_STATE.confessionTimer = setInterval(updateConfession, 5000);
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderHome() {
Â  Â  Â  Â  Â  Â  const announcements = APP_STATE.mockData.announcements;
Â  Â  Â  Â  Â  Â  const newsHtml = announcements.map(item => `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md hover:shadow-lg transition border-l-4 border-theme">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-xs font-bold text-theme uppercase">${isEn() ? item.tag_en : item.tag_zh}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="text-lg font-bold mt-1 dark:text-white">${isEn() ? item.title_en : item.title_zh}</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-400 mt-1 mb-2">${item.date}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${item.content_zh ? `<div class="mt-2 text-gray-600 dark:text-gray-300 overflow-x-auto">${item.content_zh}</div>` : ''}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `).join('');

Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-theme text-white rounded-2xl p-8 mb-10 shadow-lg relative overflow-hidden">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="relative z-10">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h1 class="text-4xl font-extrabold mb-4">${t('heroTitle')}</h1>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-lg opacity-90">${t('heroSubtitle')}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="mt-6 bg-white text-theme font-bold py-3 px-8 rounded-full hover:bg-gray-100 transition" onclick="navigate('mailboxes')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${t('btnComplaint')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="absolute right-0 bottom-0 opacity-10 transform translate-x-10 translate-y-10"><i data-lucide="school" class="w-64 h-64"></i></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="lg:col-span-2 space-y-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-2xl font-bold dark:text-white flex it
