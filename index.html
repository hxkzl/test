<!DOCTYPE html>
<html lang="zh-Hant" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ—æ¸¯é«˜ä¸­å­¸ç”Ÿæœƒ | PKSH Student Council</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        theme: {
                            DEFAULT: '#00c8b7',
                            dark: '#00a092',
                            light: '#e0fbf9'
                        }
                    }
                }
            }
        }
    </script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        :root {
            --primary-color: #00c8b7;
            font-family: 'Noto Sans TC', 'Inter', system-ui, sans-serif;
        }
        
        /* è‡ªå®šç¾©æ¨£å¼é¡åˆ¥ */
        .text-theme { color: var(--primary-color); }
        .bg-theme { background-color: var(--primary-color); }
        .border-theme { border-color: var(--primary-color); }
        .hover-text-theme:hover { color: var(--primary-color); }
        
        /* è·‘é¦¬ç‡ˆï¼šé€Ÿåº¦æ”¾æ…¢è‡³ 30s */
        .marquee-container { overflow: hidden; white-space: nowrap; position: relative; }
        .marquee-content { display: inline-block; animation: marquee 30s linear infinite; }
        .marquee-content:hover { animation-play-state: paused; }
        
        @keyframes marquee {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        /* ç”³è¨´ç‹€æ…‹æ¢ */
        .status-step.active .status-dot { background-color: var(--primary-color); }
        
        /* éæ¸¡æ•ˆæœ */
        body, div, nav, header { transition: background-color 0.3s, color 0.3s; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 dark:bg-gray-900 dark:text-gray-100 flex flex-col min-h-screen">

    <div class="bg-gray-800 text-white dark:bg-black text-sm py-2 px-4 marquee-container">
        <div class="marquee-content" id="marquee-text">
            </div>
    </div>

    <header class="sticky top-0 z-30 bg-white/95 backdrop-blur shadow-sm dark:bg-gray-800/95 dark:border-b dark:border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="#" class="flex-shrink-0 flex items-center gap-2" onclick="navigate('home')">
                    <div class="w-8 h-8 rounded-lg bg-theme flex items-center justify-center text-white font-bold">P</div>
                    <span class="text-xl font-bold text-gray-900 dark:text-white hidden sm:block">PKSH <span class="text-theme">å­¸ç”Ÿæœƒ</span></span>
                </a>

                <nav class="hidden lg:flex space-x-6 items-center">
                    <button class="nav-btn hover:text-theme" onclick="navigate('home')" data-key="home">é¦–é </button>
                    <button class="nav-btn hover:text-theme" onclick="navigate('events')" data-key="events">è¿‘æœŸæ´»å‹•</button>
                    <button class="nav-btn hover:text-theme" onclick="navigate('complaint')" data-key="complaint">ç”³è¨´</button>
                    <button class="nav-btn hover:text-theme" onclick="navigate('clubs')" data-key="clubs">ç¤¾åœ˜</button>
                    
                    <div class="relative group">
                        <button class="nav-btn hover:text-theme flex items-center" data-key="about">
                            é—œæ–¼æˆ‘å€‘ <i data-lucide="chevron-down" class="w-4 h-4 ml-1"></i>
                        </button>
                        <div class="absolute right-0 w-48 bg-white dark:bg-gray-700 rounded-md shadow-lg py-1 hidden group-hover:block border dark:border-gray-600">
                            <button class="block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600" onclick="navigate('org')" data-key="org">çµ„ç¹”æ¶æ§‹</button>
                            <button class="block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600" onclick="navigate('finance')" data-key="finance">è²¡å‹™å…¬é–‹</button>
                            <button class="block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600" onclick="navigate('admin')" data-key="admin">å¹¹éƒ¨ç™»å…¥</button>
                        </div>
                    </div>
                </nav>

                <div class="flex items-center space-x-4">
                    <button onclick="toggleLang()" class="px-2 py-1 text-xs font-bold border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition">
                        <span id="lang-display">EN</span>
                    </button>
                    <button onclick="toggleDarkMode()" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-yellow-400 transition">
                        <i data-lucide="moon" id="dark-icon" class="w-5 h-5"></i>
                        <i data-lucide="sun" id="light-icon" class="w-5 h-5 hidden"></i>
                    </button>
                    <button id="menu-button" class="lg:hidden text-gray-600 dark:text-gray-200">
                        <i data-lucide="menu" class="w-6 h-6"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <div id="mobile-menu" class="lg:hidden hidden bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700">
            <div class="px-4 pt-2 pb-4 space-y-1">
                <button class="block w-full text-left py-3 px-3 rounded-md font-medium hover:bg-gray-50 dark:hover:bg-gray-700" onclick="navigate('home')" data-key="home">é¦–é </button>
                <button class="block w-full text-left py-3 px-3 rounded-md font-medium hover:bg-gray-50 dark:hover:bg-gray-700" onclick="navigate('events')" data-key="events">è¿‘æœŸæ´»å‹•</button>
                <button class="block w-full text-left py-3 px-3 rounded-md font-medium hover:bg-gray-50 dark:hover:bg-gray-700" onclick="navigate('complaint')" data-key="complaint">ç”³è¨´ä¿¡ç®±</button>
                <button class="block w-full text-left py-3 px-3 rounded-md font-medium hover:bg-gray-50 dark:hover:bg-gray-700" onclick="navigate('clubs')" data-key="clubs">ç¤¾åœ˜å°ˆå€</button>
                <button class="block w-full text-left py-3 px-3 rounded-md font-medium hover:bg-gray-50 dark:hover:bg-gray-700" onclick="navigate('org')" data-key="org">çµ„ç¹”æ¶æ§‹</button>
                <button class="block w-full text-left py-3 px-3 rounded-md font-medium hover:bg-gray-50 dark:hover:bg-gray-700" onclick="navigate('finance')" data-key="finance">è²¡å‹™å…¬é–‹</button>
                <button class="block w-full text-left py-3 px-3 rounded-md font-medium bg-theme text-white mt-2" onclick="navigate('admin')" data-key="admin">å¹¹éƒ¨ç™»å…¥</button>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 flex-grow w-full" id="app-container">
        <div id="loading-spinner" class="flex justify-center items-center h-64">
            <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-theme"></div>
        </div>
    </main>

    <footer class="bg-gray-100 dark:bg-gray-800 mt-auto py-8 border-t dark:border-gray-700">
        <div class="max-w-7xl mx-auto px-4 text-center text-sm text-gray-500 dark:text-gray-400">
            <p class="font-bold text-lg mb-2 text-theme">PKSH Student Council</p>
            <p>Â© 2025 åœ‹ç«‹åŒ—æ¸¯é«˜ä¸­å­¸ç”Ÿæœƒ. All Rights Reserved.</p>
        </div>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signOut, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // --- ç¿»è­¯å­—å…¸ ---
        const I18N = {
            zh: {
                home: 'é¦–é ', events: 'è¿‘æœŸæ´»å‹•', complaint: 'ç”³è¨´ä¿¡ç®±', clubs: 'ç¤¾åœ˜å°ˆå€', 
                about: 'é—œæ–¼æˆ‘å€‘', org: 'çµ„ç¹”æ¶æ§‹', finance: 'è²¡å‹™å…¬é–‹', admin: 'å¹¹éƒ¨ç™»å…¥',
                marquee: 'æ­¡è¿ä¾†åˆ°åŒ—æ¸¯é«˜ä¸­å­¸ç”Ÿæœƒï¼ 12/24(ä¸‰) é‡‘å‹¾ç›ƒæ´»å‹• â€¢ 1/16-20 ç¬¬ä¸‰æ¬¡æ®µè€ƒ â€¢ å‚³æƒ…æ´»å‹•ç†±çƒˆé€²è¡Œä¸­ï¼',
                heroTitle: 'åŒ—æ¸¯é«˜ä¸­å­¸ç”Ÿè‡ªæ²»',
                heroSubtitle: 'ä½ çš„è²éŸ³ï¼Œæˆ‘å€‘çš„è¡Œå‹•ã€‚å…±å‰µæ›´ç¾å¥½çš„æ ¡åœ’ç”Ÿæ´»ã€‚',
                btnComplaint: 'ç«‹å³ç”³è¨´/å»ºè­°',
                quickActions: 'å¿«é€Ÿè¡Œå‹•',
                news: 'æœ€æ–°å…¬å‘Š',
                confession: 'åŒ¿åå‘Šç™½ç‰†',
                financeTitle: 'è²¡å‹™å…¬é–‹é€æ˜',
                orgTitle: 'å­¸ç”Ÿæœƒçµ„ç¹”æ¶æ§‹',
                eventTitle: 'è¿‘æœŸæ´»å‹•ä¸€è¦½',
                loading: 'è¼‰å…¥ä¸­...',
                readMore: 'é–±è®€è©³æƒ…',
                submit: 'æäº¤',
                track: 'æŸ¥è©¢',
                status: 'ç‹€æ…‹',
                category: 'é¡åˆ¥',
                content: 'å…§å®¹'
            },
            en: {
                home: 'Home', events: 'Events', complaint: 'Complaints', clubs: 'Clubs',
                about: 'About', org: 'Organization', finance: 'Finance', admin: 'Staff Login',
                marquee: 'Welcome to PKSH Student Council! 12/24 Xmas Event â€¢ 1/16-20 3rd Midterm Exam â€¢ Message Delivery Event Ongoing!',
                heroTitle: 'PKSH Student Council',
                heroSubtitle: 'Your Voice, Our Action. Creating a better campus life together.',
                btnComplaint: 'Submit Complaint',
                quickActions: 'Quick Actions',
                news: 'Latest News',
                confession: 'Confession Wall',
                financeTitle: 'Financial Transparency',
                orgTitle: 'Organizational Chart',
                eventTitle: 'Upcoming Events',
                loading: 'Loading...',
                readMore: 'Read More',
                submit: 'Submit',
                track: 'Track',
                status: 'Status',
                category: 'Category',
                content: 'Content'
            }
        };

        // --- æ ¸å¿ƒç‹€æ…‹ ---
        const APP_STATE = {
            view: 'home',
            lang: 'zh', // é è¨­ä¸­æ–‡
            darkMode: false,
            isAdmin: false,
            userId: null,
            mockData: {
                announcements: [
                    { id: 1, title: 'å‚³æƒ…æ´»å‹•å€’æ•¸ä¸­ï¼', tag: 'æ´»å‹•', date: '2025-12-20', content: 'é‚„æ²’å¯«å¡ç‰‡å—ï¼Ÿå¿«ä¾†å­¸å‹™è™•å‰æ”¤ä½ï¼' },
                    { id: 2, title: 'é‡‘å‹¾ç›ƒæ­Œå”±å¤§è³½è³½ç¨‹è¡¨', tag: 'æ´»å‹•', date: '2025-12-18', content: 'æ±ºè³½åå–®å·²å‡ºçˆï¼Œè«‹åƒè³½è€…æº–æ™‚å ±åˆ°ã€‚' },
                    { id: 3, title: 'ç¬¬ä¸‰æ¬¡æ®µè€ƒè€ƒç¨‹è¡¨å…¬å‘Š', tag: 'æ•™å‹™', date: '2026-01-10', content: 'è«‹åŒå­¸ææ—©æº–å‚™ï¼Œè€ƒç¨‹è¡¨è©³è¦‹é™„ä»¶ã€‚' },
                ],
                events: [
                    { date: '12/24', title: 'é‡‘å‹¾ç›ƒæ­Œå”±å¤§è³½', location: 'æ´»å‹•ä¸­å¿ƒ', time: '13:00-16:00', type: 'å¨›æ¨‚' },
                    { date: '01/16', title: 'ç¬¬ä¸‰æ¬¡æ®µè€ƒ Day1', location: 'å„ç­æ•™å®¤', time: '08:00-16:00', type: 'å­¸è¡“' },
                    { date: '01/20', title: 'ä¼‘æ¥­å¼', location: 'æ“å ´', time: '10:00', type: 'æ ¡å‹™' }
                ],
                finance: [
                    { item: 'è–èª•æ´»å‹•ä½ˆç½®è²»', amount: -5000, date: '2025-12-15', type: 'æ”¯å‡º' },
                    { item: 'å‚³æƒ…å¡ç‰‡ç¾©è³£æ”¶å…¥', amount: 8500, date: '2025-12-18', type: 'æ”¶å…¥' },
                    { item: 'æœŸåˆç¤¾åœ˜è£œåŠ©æ¬¾', amount: -12000, date: '2025-11-01', type: 'æ”¯å‡º' }
                ],
                org: [
                    { title: 'æœƒé•·', name: 'æ—åŒå­¸', role: 'çµ±ç±Œå­¸ç”Ÿæœƒäº‹å‹™' },
                    { title: 'å‰¯æœƒé•·', name: 'é™³åŒå­¸', role: 'å”åŠ©æœƒé•·ã€ç›£ç£å„çµ„' },
                    { title: 'æ´»å‹•çµ„', name: 'ç‹çµ„é•·', role: 'ç­–åŠƒæ ¡å…§å„é …æ´»å‹•' },
                    { title: 'æ¬Šç›Šçµ„', name: 'å¼µçµ„é•·', role: 'è™•ç†å­¸ç”Ÿç”³è¨´æ¡ˆä»¶' },
                    { title: 'å…¬é—œçµ„', name: 'æçµ„é•·', role: 'æ ¡å¤–äº¤æµèˆ‡è´ŠåŠ©' },
                    { title: 'ç¸½å‹™çµ„', name: 'å³çµ„é•·', role: 'è²¡å‹™ç®¡ç†èˆ‡æ¡è³¼' }
                ],
                clubs: [
                    { name: 'ç†±èˆç¤¾', category: 'è—æ–‡', img: 'https://placehold.co/400x250/00c8b7/FFFFFF?text=Dance' },
                    { name: 'ç±ƒçƒç¤¾', category: 'é‹å‹•', img: 'https://placehold.co/400x250/333333/FFFFFF?text=Basketball' },
                ],
                complaints: {}
            }
        };

        // --- Firebase (Mock) ---
        const firebaseConfig = { apiKey: "AIzaSyDWmy__mock", authDomain: "mock.firebaseapp.com" }; // è«‹æ›¿æ›çœŸå¯¦ Config
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        
        // æ¨¡æ“¬ç™»å…¥æµç¨‹
        signInAnonymously(auth).catch(e => console.log("Auth placeholder"));
        onAuthStateChanged(auth, (user) => {
            APP_STATE.userId = user ? user.uid : null;
            document.getElementById('loading-spinner')?.remove();
            render();
        });

        // --- è¼”åŠ©å‡½å¼ ---
        const t = (key) => I18N[APP_STATE.lang][key] || key;

        function updateMarquee() {
            const marqueeText = document.getElementById('marquee-text');
            if(marqueeText) marqueeText.innerText = t('marquee');
        }

        // --- é é¢æ¸²æŸ“å‡½å¼ ---
        
        // 1. é¦–é 
        function renderHome() {
            const newsHtml = APP_STATE.mockData.announcements.map(item => `
                <div class="bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md hover:shadow-lg transition border-l-4 border-theme">
                    <span class="text-xs font-bold text-theme uppercase">${item.tag}</span>
                    <h3 class="text-lg font-bold mt-1 dark:text-white">${item.title}</h3>
                    <p class="text-sm text-gray-400 mt-1">${item.date}</p>
                </div>
            `).join('');

            return `
                <div class="bg-theme text-white rounded-2xl p-8 mb-10 shadow-lg relative overflow-hidden">
                    <div class="relative z-10">
                        <h1 class="text-4xl font-extrabold mb-4">${t('heroTitle')}</h1>
                        <p class="text-lg opacity-90">${t('heroSubtitle')}</p>
                        <button class="mt-6 bg-white text-theme font-bold py-3 px-8 rounded-full hover:bg-gray-100 transition" onclick="navigate('complaint')">
                            ${t('btnComplaint')}
                        </button>
                    </div>
                    <div class="absolute right-0 bottom-0 opacity-10 transform translate-x-10 translate-y-10">
                        <i data-lucide="school" class="w-64 h-64"></i>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-2 space-y-6">
                        <h2 class="text-2xl font-bold dark:text-white flex items-center gap-2"><i data-lucide="bell" class="text-theme"></i> ${t('news')}</h2>
                        <div class="grid gap-4 md:grid-cols-2">
                            ${newsHtml}
                        </div>
                    </div>
                    <div>
                        <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md sticky top-24">
                            <h2 class="text-xl font-bold text-pink-500 mb-4 flex items-center gap-2"><i data-lucide="heart"></i> ${t('confession')}</h2>
                            <div class="bg-pink-50 dark:bg-pink-900/20 p-4 rounded-lg border border-pink-100 dark:border-pink-900">
                                <p class="italic text-gray-700 dark:text-gray-300">"å‚³æƒ…çš„å·§å…‹åŠ›çœŸçš„å¾ˆå¥½åƒï¼Œè¬è¬å­¸å§Šï¼"</p>
                                <p class="text-right text-xs text-gray-500 mt-2">- é«˜ä¸€çš„å°æ˜</p>
                            </div>
                            <button class="w-full mt-4 text-center text-sm text-pink-500 hover:underline">æˆ‘è¦å‘Šç™½</button>
                        </div>
                    </div>
                </div>
            `;
        }

        // 2. è¿‘æœŸæ´»å‹• (New)
        function renderEvents() {
            const eventsHtml = APP_STATE.mockData.events.map(ev => `
                <div class="flex items-center bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-4 border-l-4 ${ev.type === 'å¨›æ¨‚' ? 'border-pink-500' : ev.type === 'å­¸è¡“' ? 'border-blue-500' : 'border-gray-500'}">
                    <div class="p-3 bg-gray-100 dark:bg-gray-700 rounded-lg text-center min-w-[80px]">
                        <span class="block text-xl font-bold text-gray-800 dark:text-white">${ev.date.split('/')[1]}</span>
                        <span class="block text-xs text-gray-500">${ev.date.split('/')[0]}æœˆ</span>
                    </div>
                    <div class="ml-4 flex-grow">
                        <h3 class="text-lg font-bold dark:text-white">${ev.title}</h3>
                        <p class="text-sm text-gray-500 flex items-center gap-1">
                            <i data-lucide="map-pin" class="w-3 h-3"></i> ${ev.location} | 
                            <i data-lucide="clock" class="w-3 h-3"></i> ${ev.time}
                        </p>
                    </div>
                    <span class="px-3 py-1 rounded-full text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300">${ev.type}</span>
                </div>
            `).join('');

            return `
                <h1 class="text-3xl font-bold mb-6 text-theme">${t('eventTitle')}</h1>
                <div class="max-w-3xl mx-auto">
                    ${eventsHtml}
                </div>
            `;
        }

        // 3. çµ„ç¹”æ¶æ§‹ (New)
        function renderOrg() {
            const orgHtml = APP_STATE.mockData.org.map(member => `
                <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md text-center hover:-translate-y-1 transition duration-300">
                    <div class="w-20 h-20 bg-gray-200 dark:bg-gray-700 rounded-full mx-auto mb-4 flex items-center justify-center text-3xl">ğŸ‘¤</div>
                    <h3 class="text-xl font-bold text-theme">${member.title}</h3>
                    <p class="text-lg font-medium dark:text-white mt-1">${member.name}</p>
                    <p class="text-sm text-gray-500 mt-2">${member.role}</p>
                </div>
            `).join('');

            return `
                <h1 class="text-3xl font-bold mb-8 text-center text-theme">${t('orgTitle')}</h1>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    ${orgHtml}
                </div>
            `;
        }

        // 4. è²¡å‹™å…¬é–‹ (New)
        function renderFinance() {
            const rows = APP_STATE.mockData.finance.map(f => `
                <tr class="border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50">
                    <td class="py-3 px-4 dark:text-gray-300">${f.date}</td>
                    <td class="py-3 px-4 font-medium dark:text-white">${f.item}</td>
                    <td class="py-3 px-4">
                        <span class="${f.type === 'æ”¶å…¥' ? 'text-green-500' : 'text-red-500'} font-bold">
                            ${f.amount > 0 ? '+' : ''}${f.amount}
                        </span>
                    </td>
                </tr>
            `).join('');

            return `
                <h1 class="text-3xl font-bold mb-6 text-theme">${t('financeTitle')}</h1>
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                    <div class="p-6 bg-theme/10 border-b border-theme/20">
                        <p class="text-sm text-gray-600 dark:text-gray-300">æœ¬è¡¨åƒ…åˆ—å‡ºè¿‘æœŸæ”¶æ”¯æ¦‚æ³ï¼Œè©³ç´°å ±è¡¨è«‹è‡³å­¸ç”Ÿæœƒè¾¦å…¬å®¤æŸ¥é–±ã€‚</p>
                    </div>
                    <table class="w-full text-left border-collapse">
                        <thead class="bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-200 uppercase text-xs">
                            <tr>
                                <th class="py-3 px-4">æ—¥æœŸ</th>
                                <th class="py-3 px-4">é …ç›®</th>
                                <th class="py-3 px-4">é‡‘é¡ (TWD)</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${rows}
                        </tbody>
                    </table>
                </div>
            `;
        }

        // 5. ç”³è¨´ (ç°¡åŒ–ç‰ˆ)
        function renderComplaint() {
            return `
                <div class="max-w-2xl mx-auto bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg">
                    <h1 class="text-3xl font-bold mb-6 text-theme">${t('btnComplaint')}</h1>
                    <form onsubmit="event.preventDefault(); alert('åŠŸèƒ½å±•ç¤ºï¼šç”³è¨´å·²é€å‡ºï¼');">
                        <label class="block mb-2 text-sm font-bold dark:text-gray-300">${t('category')}</label>
                        <select class="w-full p-3 rounded border dark:bg-gray-700 dark:border-gray-600 dark:text-white mb-4">
                            <option>è¨­å‚™è¨­æ–½</option>
                            <option>æ´»å‹•å»ºè­°</option>
                            <option>å­¸ç”Ÿæ¬Šç›Š</option>
                        </select>
                        <label class="block mb-2 text-sm font-bold dark:text-gray-300">${t('content')}</label>
                        <textarea class="w-full p-3 rounded border dark:bg-gray-700 dark:border-gray-600 dark:text-white mb-6" rows="4"></textarea>
                        <button class="w-full bg-theme text-white font-bold py-3 rounded hover:bg-teal-600 transition">${t('submit')}</button>
                    </form>
                </div>
            `;
        }
        
        // 6. ç¤¾åœ˜ (ç°¡åŒ–ç‰ˆ)
        function renderClubs() {
            const clubList = APP_STATE.mockData.clubs.map(c => `
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden">
                    <img src="${c.img}" class="w-full h-32 object-cover">
                    <div class="p-4">
                        <span class="text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded text-gray-700 dark:text-gray-200">${c.category}</span>
                        <h3 class="font-bold mt-2 dark:text-white">${c.name}</h3>
                    </div>
                </div>
            `).join('');
            return `<h1 class="text-3xl font-bold mb-6 text-theme">${t('clubs')}</h1><div class="grid grid-cols-2 md:grid-cols-4 gap-4">${clubList}</div>`;
        }

        function renderAdmin() {
             return `<div class="max-w-md mx-auto bg-white dark:bg-gray-800 p-8 rounded-xl shadow text-center"><h1 class="text-2xl font-bold mb-4 dark:text-white">å¹¹éƒ¨å¾Œå°</h1><input type="password" placeholder="Password" class="w-full p-2 border mb-4 rounded dark:bg-gray-700"><button class="w-full bg-theme text-white py-2 rounded">Login</button></div>`;
        }

        // --- ä¸»æ¸²æŸ“é‚è¼¯ ---
        function render() {
            const container = document.getElementById('app-container');
            const view = APP_STATE.view;
            
            // æ›´æ–°å°è¦½åˆ—ç‹€æ…‹
            document.querySelectorAll('.nav-btn').forEach(btn => {
                if(btn.dataset.key === view) btn.classList.add('text-theme', 'font-bold');
                else btn.classList.remove('text-theme', 'font-bold');
            });
            
            // æ›´æ–°æ–‡å­—ç¿»è­¯
            document.querySelectorAll('[data-key]').forEach(el => {
                const key = el.dataset.key;
                if(I18N[APP_STATE.lang][key]) el.innerText = I18N[APP_STATE.lang][key];
            });

            updateMarquee();

            // è·¯ç”±åˆ‡æ›
            if (view === 'home') container.innerHTML = renderHome();
            else if (view === 'events') container.innerHTML = renderEvents();
            else if (view === 'complaint') container.innerHTML = renderComplaint();
            else if (view === 'org') container.innerHTML = renderOrg();
            else if (view === 'finance') container.innerHTML = renderFinance();
            else if (view === 'clubs') container.innerHTML = renderClubs();
            else if (view === 'admin') container.innerHTML = renderAdmin();
            
            lucide.createIcons();
            window.scrollTo(0,0);
        }

        // --- å…¨åŸŸåŠŸèƒ½ ---
        window.navigate = (view) => {
            APP_STATE.view = view;
            const mobileMenu = document.getElementById('mobile-menu');
            if (!mobileMenu.classList.contains('hidden')) mobileMenu.classList.add('hidden');
            render();
        };

        window.toggleLang = () => {
            APP_STATE.lang = APP_STATE.lang === 'zh' ? 'en' : 'zh';
            document.getElementById('lang-display').innerText = APP_STATE.lang.toUpperCase();
            render();
        };

        window.toggleDarkMode = () => {
            APP_STATE.darkMode = !APP_STATE.darkMode;
            const html = document.documentElement;
            const darkIcon = document.getElementById('dark-icon');
            const lightIcon = document.getElementById('light-icon');
            
            if (APP_STATE.darkMode) {
                html.classList.add('dark');
                darkIcon.classList.add('hidden');
                lightIcon.classList.remove('hidden');
            } else {
                html.classList.remove('dark');
                darkIcon.classList.remove('hidden');
                lightIcon.classList.add('hidden');
            }
        };

        // Mobile Menu Toggle
        document.getElementById('menu-button').addEventListener('click', () => {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

        // Initial Render
        render();

    </script>
</body>
</html>
